<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rogue Legion - UI Prototype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="app-container">

        <div id="screen-main-menu" class="screen active">
            <div class="flex flex-col items-center justify-center h-full text-center">
                <div class="mb-16">
                    <h1 class="text-6xl font-bold mb-2 text-gray-100" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
                        ROGUE LEGION</h1>
                    <p class="text-xl text-gray-400">(暂定名)</p>
                </div>
                <div class="space-y-5"> <button onclick="showScreen('screen-stage-preview')"
                        class="w-64 py-3 px-6 bg-slate-600 hover:bg-slate-700 text-white text-lg rounded-md shadow-md transition duration-150 ease-in-out">
                        开始游戏 (Start Game)
                    </button>
                    <button onclick="alert('功能未实现')"
                        class="w-64 py-3 px-6 bg-slate-600 hover:bg-slate-700 text-white text-lg rounded-md shadow-md transition duration-150 ease-in-out">
                        设置 (Options)
                    </button>
                    <button onclick="alert('功能未实现')"
                        class="w-64 py-3 px-6 bg-slate-600 hover:bg-slate-700 text-white text-lg rounded-md shadow-md transition duration-150 ease-in-out">
                        退出 (Exit)
                    </button>
                </div>
            </div>
            <div class="absolute bottom-4 right-5 text-sm text-gray-500">版本: 1.5</div>
        </div>

        <div id="screen-stage-preview" class="screen p-5 relative overflow-hidden">
            <div class="absolute inset-0 -z-10 bg-gradient-to-br from-indigo-900 via-gray-900 to-slate-900 opacity-60">
            </div>
            <div id="top-status-bar-stage-preview"
                class="top-status-bar-container flex justify-between items-center gap-x-3 sm:gap-x-4 py-2 px-4 mb-4 bg-black/30 rounded-md shadow-inner border-b border-t border-gray-700 min-h-[86px]">
            </div>
            <h2 class="text-center text-3xl font-bold mb-6 text-gray-100 relative z-10 py-2"
                style="text-shadow: 1px 1px 3px rgba(0,0,0,0.5);">
                当前阶段预览
            </h2>

            <div class="flex-grow flex justify-around gap-6 items-stretch relative z-10">
                <div
                    class="round-card flex flex-col w-1/3 bg-slate-800/90 border border-slate-600 rounded-xl p-5 shadow-lg backdrop-blur-sm">
                    <div class="text-center mb-4 pb-3 border-b border-slate-600/50">
                        <h3 class="text-xl font-semibold text-gray-100 mb-1.5">回合 2-1</h3> <span
                            class="text-sm text-yellow-400">难度: ★★☆☆☆</span>
                    </div>
                    <div class="mb-5 flex-grow">
                        <h4 class="text-base font-medium mb-2 text-gray-400">敌人:</h4>
                        <ul class="text-base text-gray-200 space-y-2">
                            <li class="flex items-center"><span class="text-xl mr-2">👹</span><span>兽人战士 x 8</span></li>
                            <li class="flex items-center"><span class="text-xl mr-2">🪓</span><span>兽人斧手 x 5</span></li>
                        </ul>
                    </div>
                    <div class="mt-auto border-t border-slate-600/50 pt-3">
                        <h4 class="text-base font-medium mb-1.5 text-gray-400">跳过奖励:</h4>
                        <p class="text-base text-green-400 flex items-center"><span
                                class="text-xl mr-1.5">💰</span><span>+50 [G] 金币</span></p>
                    </div>
                </div>

                <div
                    class="round-card flex flex-col w-1/3 bg-slate-800/90 border border-slate-600 rounded-xl p-5 shadow-lg backdrop-blur-sm">
                    <div class="text-center mb-4 pb-3 border-b border-slate-600/50">
                        <h3 class="text-xl font-semibold text-gray-100 mb-1.5">回合 2-2</h3>
                        <span class="text-sm text-yellow-400">难度: ★★★☆☆</span>
                    </div>
                    <div class="mb-5 flex-grow">
                        <h4 class="text-base font-medium mb-2 text-gray-400">敌人:</h4>
                        <ul class="text-base text-gray-200 space-y-2">
                            <li class="flex items-center"><span class="text-xl mr-2">🏹</span><span>精灵弓箭手 x 6</span>
                            </li>
                            <li class="flex items-center"><span class="text-xl mr-2">👤</span><span>人类步兵 x 10</span>
                            </li>
                        </ul>
                    </div>
                    <div class="mt-auto border-t border-slate-600/50 pt-3">
                        <h4 class="text-base font-medium mb-1.5 text-gray-400">跳过奖励:</h4>
                        <p class="text-base text-blue-400 flex items-center"><span
                                class="text-xl mr-1.5">🛍️</span><span>+1 随机装备包</span></p>
                    </div>
                </div>

                <div
                    class="round-card flex flex-col w-1/3 bg-red-900/60 border-2 border-red-600 rounded-xl p-5 shadow-xl backdrop-blur-sm ring-2 ring-red-500/50">
                    <div class="text-center mb-4 pb-3 border-b border-red-700/50">
                        <h3 class="text-xl font-semibold text-red-200 mb-1.5 flex items-center justify-center gap-2">
                            <span class="text-2xl">👑</span> 回合 2-3 <span class="text-2xl">[BOSS]</span>
                        </h3>
                        <span class="text-sm text-red-300 font-bold">难度: ★★★★☆</span>
                    </div>
                    <div class="mb-5 flex-grow">
                        <h4 class="text-base font-medium mb-2 text-red-300">敌人:</h4>
                        <ul class="text-base text-red-200 space-y-2">
                            <li class="flex items-center"><span
                                    class="text-2xl mr-2 font-bold text-red-100">BOSS</span><span>**兽人酋长**</span></li>
                            <li class="flex items-center"><span class="text-xl mr-2">👹</span><span>兽人战士 x 6</span></li>
                            <li class="text-yellow-300 text-xs italic mt-1">(特殊能力预警!)</li>
                        </ul>
                    </div>
                    <div class="mt-auto border-t border-red-700/50 pt-3">
                        <h4 class="text-base font-medium mb-1.5 text-gray-400">跳过奖励:</h4>
                        <p class="text-base text-gray-500 italic">不可跳过</p>
                    </div>
                </div>
            </div>

            <footer class="text-center mt-6 pt-4 border-t border-gray-600/50 relative z-10"> <button
                    onclick="showScreen('screen-decision')"
                    class="py-3 px-12 bg-green-600 hover:bg-green-700 text-white text-xl rounded-lg shadow-lg transition duration-150 ease-in-out transform hover:scale-105">
                    继续 (Proceed)
                </button>
            </footer>
        </div>

        <div id="screen-decision" class="screen flex-col p-4">
            <header class="flex justify-between items-center pb-2 border-b border-gray-600 text-xs text-gray-400 mb-3">
                <div>
                    <span class="mr-4">阶段 2 / 回合 2-1</span>
                    <span class="mr-4">金币[G]: <span id="header-gold-decision"
                            class="text-yellow-300 font-bold">150</span></span>
                    <span id="header-roster-decision">兵团: <span class="font-bold">25 / 50</span></span>
                </div>
                <button onclick="showScreen('screen-stage-preview')"
                    class="text-xs py-0.5 px-2 bg-slate-600 hover:bg-slate-700 rounded">返回预览</button>
            </header>

            <div id="top-status-bar-decision"
                class="top-status-bar-container flex justify-between items-center gap-x-2 sm:gap-x-3 py-1.5 px-3 mb-3 bg-black/30 rounded-md shadow-inner border-b border-t border-gray-700 min-h-[50px]">
            </div>

            <h2 class="text-center text-xl font-semibold mb-4 text-gray-100">回合 2-1: 遭遇兽人巡逻队</h2>
            <div class="flex-grow flex gap-6 mb-4 overflow-hidden">
                <div class="w-1/2 flex flex-col">
                    <div class="mb-2">
                        <h3 class="text-base font-semibold mb-2 text-gray-300">敌人预览:</h3>
                        <ul class="list-none text-gray-200 space-y-1 text-xs pl-1">
                            <li class="flex items-center"><span
                                    class="text-base w-5 text-center mr-1">👹</span><span>兽人战士 x 8</span></li>
                            <li class="flex items-center"><span
                                    class="text-base w-5 text-center mr-1">🪓</span><span>兽人斧手 x 5</span></li>
                        </ul>
                    </div>
                    <div class="mt-auto border-t border-dashed border-gray-600 pt-2">
                        <h3 class="text-base font-semibold mb-2 text-yellow-300">预期战斗奖励:</h3>
                        <ul class="list-disc list-inside text-yellow-200 space-y-0.5 text-xs">
                            <li>大量金币 💰</li>
                            <li>经验值 ✨</li>
                            <li><span class="opacity-70">可能掉落: 装备<span class="mx-1">🛡️</span>/ 技能<span
                                        class="mx-1">📜</span></span></li>
                        </ul>
                    </div>
                </div>

                <div class="w-1/2 flex flex-col">
                    <h3 class="text-base font-semibold mb-2 text-gray-300">敌方布阵预览:</h3>
                    <div
                        class="enemy-layout-grid flex-grow aspect-video bg-black/40 border border-gray-600 rounded p-1 grid grid-cols-6 grid-rows-4 gap-0.5">
                        <div class="bg-transparent rounded-sm"></div>
                        <div class="enemy-unit flex items-center justify-center bg-red-900/30 border border-red-700/50 rounded-sm text-lg"
                            title="兽人战士"><span class="opacity-90">👹</span></div>
                        <div class="enemy-unit flex items-center justify-center bg-red-900/30 border border-red-700/50 rounded-sm text-lg"
                            title="兽人战士"><span class="opacity-90">👹</span></div>
                        <div class="enemy-unit flex items-center justify-center bg-red-900/30 border border-red-700/50 rounded-sm text-lg"
                            title="兽人斧手"><span class="opacity-90">🪓</span></div>
                        <div class="enemy-unit flex items-center justify-center bg-red-900/30 border border-red-700/50 rounded-sm text-lg"
                            title="兽人战士"><span class="opacity-90">👹</span></div>
                        <div class="bg-transparent rounded-sm"></div>
                        <div class="bg-transparent rounded-sm"></div>
                        <div class="bg-transparent rounded-sm"></div>
                        <div class="enemy-unit flex items-center justify-center bg-red-900/30 border border-red-700/50 rounded-sm text-lg"
                            title="兽人战士"><span class="opacity-90">👹</span></div>
                        <div class="enemy-unit flex items-center justify-center bg-red-900/30 border border-red-700/50 rounded-sm text-lg"
                            title="兽人战士"><span class="opacity-90">👹</span></div>
                        <div class="enemy-unit flex items-center justify-center bg-red-900/30 border border-red-700/50 rounded-sm text-lg"
                            title="兽人斧手"><span class="opacity-90">🪓</span></div>
                        <div class="bg-transparent rounded-sm"></div>
                        <div class="enemy-unit flex items-center justify-center bg-red-900/30 border border-red-700/50 rounded-sm text-lg"
                            title="兽人战士"><span class="opacity-90">👹</span></div>
                        <div class="enemy-unit flex items-center justify-center bg-red-900/30 border border-red-700/50 rounded-sm text-lg"
                            title="兽人斧手"><span class="opacity-90">🪓</span></div>
                        <div class="enemy-unit flex items-center justify-center bg-yellow-800/50 border-2 border-yellow-500 rounded-sm text-xl ring-1 ring-yellow-400"
                            title="精英兽人斧手?"><span class="opacity-90">🪓</span></div>
                        <div class="enemy-unit flex items-center justify-center bg-red-900/30 border border-red-700/50 rounded-sm text-lg"
                            title="兽人斧手"><span class="opacity-90">🪓</span></div>
                        <div class="enemy-unit flex items-center justify-center bg-red-900/30 border border-red-700/50 rounded-sm text-lg"
                            title="兽人战士"><span class="opacity-90">👹</span></div>
                        <div class="bg-transparent rounded-sm"></div>
                        <div class="bg-transparent rounded-sm"></div>
                        <div class="bg-transparent rounded-sm"></div>
                        <div class="bg-transparent rounded-sm"></div>
                        <div class="bg-transparent rounded-sm"></div>
                        <div class="bg-transparent rounded-sm"></div>
                        <div class="bg-transparent rounded-sm"></div>
                    </div>
                    <p class="text-xs text-gray-500 mt-1 text-center">(示意布局)</p>
                </div>
            </div>

            <div class="flex justify-around items-center border-t border-gray-600 pt-3 mt-auto">
                <div class="text-center">
                    <button onclick="showScreen('screen-combat')"
                        class="w-64 py-3 px-5 bg-gradient-to-r from-red-700 to-red-900 hover:from-red-800 hover:to-red-900 text-white text-lg rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-105">
                        ⚔️ 战斗
                    </button>
                    <p class="text-xs text-gray-400 mt-1">赢取丰厚奖励</p>
                </div>

                <div class="text-center">
                    <button onclick="showScreen('screen-shop')"
                        class="w-64 py-3 px-5 bg-gradient-to-r from-gray-500 to-gray-700 hover:from-gray-600 hover:to-gray-700 text-white text-lg rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-105"
                        id="skip-button">
                        ➡️ 跳过
                    </button>
                    <p class="text-xs text-green-400 mt-1">获取奖励: +50 [G] 金币</p>
                </div>
            </div>

        </div>
        <div id="screen-shop" class="screen flex-col p-4">

            <header
                class="flex justify-between items-center pb-2 border-b border-gray-600 text-xs text-gray-400 mb-2 flex-shrink-0">
                <div>
                    <span class="mr-4 font-semibold text-base text-gray-200">休整阶段</span>
                    <span class="mr-4">金币[G]: <span id="player-gold-display"
                            class="text-yellow-300 font-bold">--</span></span>
                    <span class="mr-4">兵团: <span id="roster-count-display" class="font-bold">-- / --</span> <span
                            id="recruit-cost-info" class="text-xs opacity-80">(+0%)</span></span>
                    <span>刷新:<span id="refresh-cost-display" class="text-orange-400">--</span>[G]</span>
                </div>
                <button onclick="showScreen('screen-stage-preview')"
                    class="py-1.5 px-4 bg-green-600 hover:bg-green-700 text-white text-sm rounded-md shadow">结束休整</button>
            </header>

            <div id="top-status-bar-shop"
                class="top-status-bar-container shop-status-bar flex justify-between items-center gap-x-2 py-1.5 px-3 mb-3 bg-black/30 rounded-md shadow-inner border-b border-t border-gray-700 min-h-[76px] flex-shrink-0">
            </div>

            <div class="flex justify-between items-center mb-2 flex-shrink-0 px-1">
                <h2 class="text-lg font-semibold text-gray-100 flex items-center gap-2"><span
                        class="text-xl">🛒</span>商店</h2>
                <div class="flex items-center gap-x-2">
                    <button id="toggle-sell-mode-button" onclick="toggleSellMode()"
                        class="text-sm py-1 px-3 bg-yellow-600 hover:bg-yellow-700 text-black rounded shadow">出售物品</button>
                    <button onclick="attemptRefreshShop()"
                        class="text-sm py-1 px-3 bg-blue-600 hover:bg-blue-700 rounded shadow"> 刷新 (<span
                            id="refresh-button-cost">--</span> G)
                    </button>
                </div>
            </div>

            <div class="flex-grow flex gap-4 overflow-hidden">

                <div class="w-1/2 flex flex-col bg-black/20 p-3 rounded-lg border border-gray-700 overflow-hidden">
                    <div class="flex-grow space-y-2 overflow-y-auto pr-1">
                        <div>
                            <h3
                                class="text-xs font-medium text-gray-400 mb-1 uppercase tracking-wider flex items-center gap-1.5">
                                <span class="text-sm">🎁</span>奖励包
                            </h3>
                            <div id="shop-packs-list" class="space-y-1.5">
                            </div>
                        </div>
                        <div class="mt-4 border-t border-dashed border-gray-600 pt-2">
                            <h3
                                class="text-xs font-medium text-cyan-400 mb-1 uppercase tracking-wider flex items-center gap-1.5">
                                <span class="text-sm">🎟️</span>优惠券
                            </h3>
                            <div id="shop-coupons-section"
                                class="text-center text-gray-500 italic text-xs p-2 bg-black/20 rounded"> (击败 Boss 后...)
                            </div>
                        </div>
                    </div>
                </div>

                <div class="w-1/2 flex flex-col bg-black/20 p-3 rounded-lg border border-gray-700 overflow-hidden">
                    <div class="flex-grow space-y-2 overflow-y-auto pr-1">
                        <div>
                            <h3
                                class="text-xs font-medium text-gray-400 mb-1 uppercase tracking-wider flex items-center gap-1.5">
                                <span class="text-sm">🗿</span>图腾
                            </h3>
                            <div id="shop-totems-for-sale-list" class="space-y-1.5">
                            </div>
                        </div>
                        <div class="mt-3 border-t border-gray-600/50 pt-2">
                            <h3
                                class="text-xs font-medium text-gray-400 mb-1 uppercase tracking-wider flex items-center gap-1.5">
                                <span class="text-sm">👥</span>招募
                            </h3>
                            <div id="shop-recruits-list" class="space-y-1.5">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-3 flex-shrink-0 text-center">
                <button onclick="showScreen('screen-roster')"
                    class="py-2 px-6 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-md shadow flex items-center justify-center gap-2 w-1/3 mx-auto">
                    <span class="text-base">📜</span>管理兵团
                </button>
            </div>

        </div>
        <div id="screen-roster" class="screen  p-5">

            <header class="flex justify-between items-center pb-3 border-b border-gray-600 text-sm text-gray-400 mb-4">
                <h2 class="text-xl font-semibold text-gray-100">兵团管理 (Roster Management)</h2>
                <div id="roster-count-header">
                    人口: <span class="font-bold text-white">-- / --</span>
                    <span class="text-xs opacity-80">(招募成本影响)</span>
                </div>
                <button onclick="showScreen('screen-shop')"
                    class="py-1 px-3 bg-slate-600 hover:bg-slate-700 rounded shadow text-xs">返回商店</button>
            </header>
            <div class="flex-grow overflow-y-auto pr-2">
                <div id="roster-grid" class="grid grid-cols-8 gap-3">
                </div>
            </div>

            <footer class="flex justify-center items-center pt-4 border-t border-gray-600 mt-auto">
                <button disabled
                    class="text-sm py-1 px-3 bg-gray-700 text-gray-500 rounded cursor-not-allowed mx-2">&lt;
                    上一页</button>
                <span id="roster-pagination-info" class="text-sm text-gray-400">页面 - / -</span>
                <button disabled class="text-sm py-1 px-3 bg-gray-700 text-gray-500 rounded cursor-not-allowed mx-2">下一页
                    &gt;</button>
            </footer>

        </div>

        <div id="screen-combat" class="screen flex-col p-0 relative">

            <div class="absolute inset-0 -z-10 bg-gradient-to-b from-gray-700 via-gray-800 to-black opacity-80"></div>

            <header
                class="relative z-10 flex justify-between items-center px-4 py-1.5 bg-black/60 border-b border-gray-600 text-xs text-gray-300 shadow-md backdrop-blur-sm">
                <div class="flex items-center gap-x-3">
                    <div class="flex gap-x-1.5">
                        <span class="text-sm border border-cyan-700 bg-cyan-900/50 px-1 rounded" title="冲锋号角">📢</span>
                        <span class="text-sm border border-cyan-700 bg-cyan-900/50 px-1 rounded" title="精锐先锋">🛡️</span>
                        <span class="text-sm border border-gray-600 bg-gray-800/50 px-1 rounded opacity-50"
                            title="空">❌</span>
                        <span class="text-sm border border-gray-600 bg-gray-800/50 px-1 rounded opacity-50"
                            title="空">❌</span>
                    </div>
                    <div class="border-l border-gray-600 pl-3"> 阶段 2 / 回合 2-1 </div>
                </div>
                <div class="flex-grow mx-6">
                    <div class="text-center text-red-400 text-xs mb-0.5">敌人强度</div>
                    <div class="w-full bg-gray-700 rounded-full h-2.5 border border-black/50 shadow-inner">
                        <div class="bg-gradient-to-r from-red-500 to-orange-500 h-full rounded-full" style="width: 60%">
                        </div>
                    </div>
                </div>
                <div class="flex items-center gap-x-3 text-right">
                    <div class="border-r border-gray-600 pr-3"> 轮次: <span class="font-semibold text-white">1</span>
                    </div>
                    <div> 兵团: <span class="font-bold text-base text-white">25 / 50</span> </div>
                </div>
            </header>

            <div class="relative z-10 flex-grow flex">

                <div id="player-area"
                    class="w-1/2 h-full bg-blue-900/10 border-r border-blue-400/30 relative p-2 overflow-hidden">
                    <div class="unit player-unit absolute flex flex-col items-center w-10" style="left: 30%; top: 40%;">
                        <span class="text-2xl">👤</span>
                        <div class="health-bar">
                            <div class="health-bar-inner" style="width: 80%;"></div>
                        </div>
                        <span class="status-icon text-xs opacity-75" style="top: -5px; right: -5px;">🛡️</span>
                    </div>
                    <div class="unit player-unit absolute flex flex-col items-center w-10 border-2 border-red-500 rounded-sm"
                        style="left: 40%; top: 55%;"> <span class="text-2xl">🐎</span>
                        <div class="health-bar">
                            <div class="health-bar-inner" style="width: 30%;"></div>
                        </div>
                    </div>
                    <div class="unit player-unit absolute flex flex-col items-center w-10" style="left: 25%; top: 65%;">
                        <span class="text-2xl">👤</span>
                        <div class="health-bar">
                            <div class="health-bar-inner" style="width: 60%;"></div>
                        </div>
                    </div>
                    <div class="unit player-unit absolute flex flex-col items-center w-10" style="left: 55%; top: 50%;">
                        <span class="text-2xl">🏹</span>
                        <div class="health-bar">
                            <div class="health-bar-inner" style="width: 90%;"></div>
                        </div>
                        <div class="projectile arrow" style="transform: translate(35px, -15px) rotate(-35deg);"></div>
                    </div>
                    <div class="unit player-unit absolute flex flex-col items-center w-10" style="left: 45%; top: 30%;">
                        <span class="text-2xl">👤</span>
                        <div class="health-bar">
                            <div class="health-bar-inner" style="width: 100%;"></div>
                        </div>
                    </div>
                </div>

                <div id="enemy-area" class="w-1/2 h-full bg-red-900/10 relative p-2 overflow-hidden">
                    <div class="unit enemy-unit absolute flex flex-col items-center w-10" style="left: 60%; top: 35%;">
                        <span class="text-2xl">👹</span>
                        <div class="health-bar enemy">
                            <div class="health-bar-inner" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="unit enemy-unit absolute flex flex-col items-center w-10" style="left: 70%; top: 50%;">
                        <span class="text-2xl">🪓</span>
                        <div class="health-bar enemy">
                            <div class="health-bar-inner" style="width: 75%;"></div>
                        </div>
                        <span class="status-icon text-xs opacity-75 text-red-400"
                            style="top: -5px; left: -5px;">⬇️</span>
                    </div>
                    <div class="unit enemy-unit absolute flex flex-col items-center w-12 h-12 border-2 border-yellow-400 bg-red-800/50"
                        style="left: 55%; top: 60%;"> <span class="text-3xl">👹</span>
                        <div class="health-bar enemy">
                            <div class="health-bar-inner bg-orange-500" style="width: 95%;"></div>
                        </div>
                    </div>
                    <div class="unit enemy-unit absolute flex flex-col items-center w-10" style="left: 45%; top: 45%;">
                        <span class="text-2xl">👹</span>
                        <div class="health-bar enemy">
                            <div class="health-bar-inner" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="unit enemy-unit absolute flex flex-col items-center w-10" style="left: 75%; top: 25%;">
                        <span class="text-2xl">👹</span>
                        <div class="health-bar enemy">
                            <div class="health-bar-inner" style="width: 85%;"></div>
                        </div>
                    </div>
                    <span class="absolute text-red-500 text-3xl font-bold"
                        style="left: 47%; top: 43%; animation: hit-effect 0.5s ease-out;">💥</span>
                </div>

            </div>
            <footer
                class="absolute bottom-0 left-0 right-0 bg-black/60 px-4 py-1 border-t border-gray-700 text-center z-10">
                <span class="text-xs text-gray-400 italic mr-4">(战斗进行中... 自动战斗)</span>
                <button onclick="showScreen('screen-game-over-win')"
                    class="text-xs py-0.5 px-2 bg-green-700 hover:bg-green-800 rounded shadow mx-1">模拟胜利(->结束)</button>
                <button onclick="showScreen('screen-game-over-lose')"
                    class="text-xs py-0.5 px-2 bg-red-700 hover:bg-red-800 rounded shadow mx-1">模拟失败(->结束)</button>
            </footer>

        </div>

        <div id="screen-game-over-lose" class="screen flex-col items-center justify-center text-center bg-red-900/70">
            <div class="mb-8">
                <h1 class="text-6xl font-bold mb-2 text-red-200" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">失败
                </h1>
                <p class="text-2xl text-red-300">你的军团已被击溃!</p>
            </div>
            <div class="text-lg text-gray-300 space-y-2 mb-10">
                <p>你抵达了 阶段 4 / 回合 4-2</p>
                <p>击败 Boss 数量: 3</p>
                <p>最大兵团规模: 38</p>
            </div>
            <button onclick="showScreen('screen-main-menu')"
                class="py-3 px-8 bg-gray-600 hover:bg-gray-700 text-white text-xl rounded-md shadow-md transition duration-150 ease-in-out">
                返回主菜单
            </button>
        </div>
        <div id="screen-game-over-win" class="screen flex-col items-center justify-center text-center bg-green-900/70">
            <div class="mb-8">
                <h1 class="text-6xl font-bold mb-2 text-yellow-200" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">
                    胜利!</h1>
                <p class="text-2xl text-yellow-300">最终 Boss 已被征服!</p>
            </div>
            <div class="text-lg text-gray-200 space-y-2 mb-10">
                <p>你成功完成了所有 6 个阶段!</p>
                <p>最终兵团规模: 49</p>
                <p>最终图腾组合: 📢🛡️📐✨</p>
            </div>
            <button onclick="showScreen('screen-main-menu')"
                class="py-3 px-8 bg-yellow-600 hover:bg-yellow-700 text-gray-900 font-bold text-xl rounded-md shadow-md transition duration-150 ease-in-out">
                返回主菜单
            </button>

        </div>
    </div>


    <div id="unit-detail-modal"
        class="modal-overlay fixed inset-0 bg-black/80 flex items-center justify-center hidden z-50 p-4 backdrop-blur-sm">
        <div
            class="modal-panel bg-gray-800 text-gray-300 p-5 rounded-lg shadow-xl max-w-3xl w-full max-h-[85vh] overflow-y-auto relative border border-gray-600">

            <header class="flex justify-between items-center pb-2 border-b border-gray-600/50 mb-4">
                <h3 class="text-base font-semibold text-gray-200">单位详情 (Unit Details)</h3> <button
                    onclick="closeModal('unit-detail-modal')"
                    class="text-gray-500 hover:text-white text-2xl font-light leading-none p-1 rounded-full hover:bg-gray-700 transition-colors duration-150 ease-in-out">&times;</button>
            </header>

            <div class="flex gap-6">
                <div class="w-1/3 flex flex-col">
                    <div
                        class="aspect-square bg-gray-700 border border-gray-500 rounded flex items-center justify-center mb-3 shadow-inner w-full">
                        <span id="modal-unit-icon" class="text-gray-400 text-4xl">👹</span>
                    </div>
                    <div class="bg-gray-700/60 p-2 rounded border border-gray-600">
                        <h4 id="modal-trait-name" class="font-semibold text-xs mb-1.5 text-sky-300">种族特性: --</h4>
                        <ul id="modal-trait-desc" class="list-none text-xs text-gray-400 space-y-1 pl-1"> </ul>
                    </div>
                </div>

                <div class="w-2/3 flex flex-col">
                    <div class="mb-3">
                        <h3 id="modal-unit-name" class="text-lg font-semibold text-white mb-1">-- Unit Name --</h3>
                        <span id="modal-unit-race"
                            class="text-xs bg-orange-600 text-white px-2 py-0.5 rounded mr-1.5 font-medium">Race</span>
                        <span id="modal-unit-class"
                            class="text-xs bg-red-600 text-white px-2 py-0.5 rounded font-medium">Class</span>
                    </div>
                    <div
                        class="grid grid-cols-2 gap-x-5 gap-y-1.5 text-xs mb-4 border-t border-b border-gray-600/50 py-3">
                        <div><span class="text-gray-400 w-16 inline-block opacity-80">生命(HP):</span> <span
                                id="modal-stat-hp" class="text-gray-100 font-medium">--</span></div>
                        <div><span class="text-gray-400 w-16 inline-block opacity-80">攻击(ATK):</span> <span
                                id="modal-stat-atk" class="text-gray-100 font-medium">--</span></div>
                        <div><span class="text-gray-400 w-16 inline-block opacity-80">防御(DEF):</span> <span
                                id="modal-stat-def" class="text-gray-100 font-medium">--</span></div>
                        <div><span class="text-gray-400 w-16 inline-block opacity-80">抵抗(RES):</span> <span
                                id="modal-stat-res" class="text-gray-100 font-medium">--</span></div>
                        <div><span class="text-gray-400 w-16 inline-block opacity-80">攻速(ASPD):</span> <span
                                id="modal-stat-aspd" class="text-gray-100 font-medium">--</span></div>
                        <div><span class="text-gray-400 w-16 inline-block opacity-80">命中(ACC):</span> <span
                                id="modal-stat-acc" class="text-gray-100 font-medium">--</span></div>
                        <div><span class="text-gray-400 w-16 inline-block opacity-80">移速(MOV):</span> <span
                                id="modal-stat-mov" class="text-gray-100 font-medium">--</span></div>
                        <div><span class="text-gray-400 w-16 inline-block opacity-80">闪避(EVA):</span> <span
                                id="modal-stat-eva" class="text-gray-100 font-medium">--</span></div>
                        <div><span class="text-gray-400 w-16 inline-block opacity-80">暴击率(%):</span> <span
                                id="modal-stat-critP" class="text-gray-100 font-medium">--</span></div>
                        <div><span class="text-gray-400 w-16 inline-block opacity-80">暴击伤害:</span> <span
                                id="modal-stat-critD" class="text-gray-100 font-medium">--</span></div>
                    </div>
                    <div class="mb-3">
                        <h4 class="font-semibold text-sm mb-1.5 text-gray-300">装备</h4>
                        <div id="modal-equipment-info"
                            class="flex items-center justify-between bg-gray-700/60 p-2 rounded border border-gray-600 min-h-[52px]">
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold text-sm mb-1.5 text-gray-300">技能</h4>
                        <div id="modal-skill-info"
                            class="flex items-center justify-between bg-gray-700/60 p-2 rounded border border-gray-600 min-h-[52px]">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js" defer></script>
</body>

</html>